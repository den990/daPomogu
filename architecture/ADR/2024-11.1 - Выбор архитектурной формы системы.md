**Дата:** 6 ноября 2024 г.

**Статус:** Принято

**Контекст:**

При разработке платформы для сервиса такси мы столкнулись с выбором архитектуры, которая обеспечит масштабируемость, надёжность и возможность легко добавлять новые функции. Поскольку такси-сервис предполагает высокую нагрузку и множество интеграций (карты, платежи, геолокация), нам нужно учесть стабильность и отказоустойчивость.(PER01, PER02, PER03, PER04, SCA01, SCA02, SCA03, SCA04)

**Рассмотренные варианты:**

1. **Модульный монолит:** Централизованное приложение с чётко выделенными модулями для каждого компонента системы: авторизация, маршруты, заказы, платежи и т.д.
2. **Микросервисы:** Разделение системы на отдельные сервисы, каждый из которых отвечает за свою задачу и взаимодействует с другими через API.
3. **Серверлесс:** Использование функции как услуги (FaaS) для динамических задач, таких как расчёт маршрутов и обработка платежей, с оплатой за фактическое использование.

**Решение:**

Выбраны микросервисы.

**Обоснование:**

- **Масштабируемость:** Каждая часть системы — заказы, платежи, геолокация и т.д. — может масштабироваться независимо в зависимости от нагрузки.
- **Гибкость разработки:** Можно быстрее добавлять и обновлять отдельные компоненты, не затрагивая всю систему.
- **Отказоустойчивость:** Проблемы в одном сервисе не влияют на работу остальных, что особенно важно для такси-сервиса, где простои неприемлемы.
- **Технологическая независимость:** Каждая команда может выбрать подходящий стек технологий для каждого сервиса, что помогает внедрять инновации.
- **Легкость в тестировании**: Микросервисы можно тестировать независимо, что упрощает процесс тестирования и позволяет быстрее находить и исправлять ошибки.

**Недостатки решения:**

- **Сложность управления:** Развертывание, мониторинг и управление большим количеством сервисов требуют значительных усилий.
- **Сетевые задержки:** Взаимодействие между микросервисами происходит через сеть, что может замедлять выполнение задач и увеличивать издержки.
- **Требования к безопасности:** Необходимо более тщательно подходить к управлению правами доступа и защите данных, так как взаимодействие происходит через открытые API.

**Последствия:**

- **Увеличение сложности системы**: Переход на микросервисную архитектуру может привести к усложнению системы, что требует более тщательного проектирования и управления.
- **Необходимость в автоматизации**: Для эффективного управления множеством микросервисов требуется внедрение автоматизации процессов развертывания, тестирования и мониторинга.
- **Повышенные затраты на инфраструктуру**: Микросервисы могут потребовать дополнительных ресурсов для хостинга, мониторинга и управления, что может увеличить общие затраты на инфраструктуру.